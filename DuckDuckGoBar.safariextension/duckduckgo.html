<!DOCTYPE html>
<html>
<head>
    <title>DuckDuckGo Bar</title>
    <style type="text/css">
        body {
            padding: 2px;
        }
	#logo {
	    float: left;
	}
	#search {
	    float: left;
	}
	#ddgIcon {
	    display: inline;
	    margin: 2px 0px;
	}
        #searchBox {
            padding: 0;
            margin: 0;
        }
        #searchField {
            outline:none;
            width:350px;
            color:#222;
            background:#FFF;
            font-family:Century Gothic,Arial;
            font-size:18px;
            border:0 none;
            padding:0 5px;
            -webkit-border-radius: 0px 15px 15px 0px;
        }
    </style>
</head>
<body>
<div id="logo">
  <a href="https://www.duckduckgo.com/"><img src="leftbar.png" id="ddgIcon" /></a>
</div>
<div id="search">
  <input id="searchField" type="text" name="q" onkeydown="if (event.keyCode == 13) document.getElementById('btnSearch').click()" />
  <input type="submit" value="Duck Duck Go!" onclick="ddgSubmitSearch()" id="btnSearch" />
</div>
<script type="text/javascript">
function ddgSubmitSearch() {
  var searchTerms = document.getElementById('searchField').value;
  var secure = safari.extension.settings.getItem("ddgSecure");
  if (secure) {
    searchURL = "https://duckduckgo.com/?q=" + searchTerms;
  }
  else {
    searchURL = "http://duckduckgo.com/?q=" + searchTerms;
  }
        
  ddgOpenStyle = safari.extension.settings.getItem("ddgOpenStyle");
  switch(ddgOpenStyle) {
    case 'newTab':
      var tab = safari.application.activeBrowserWindow.openTab("foreground");
      tab.url = searchURL;
      break;
    case 'bgTab':
      var tab = safari.application.activeBrowserWindow.openTab("background");
      tab.url = searchURL;
      break;
    case 'newWindow':
      safari.application.openBrowserWindow();
    case 'curTab':
      safari.application.activeBrowserWindow.activeTab.url = searchURL;
       break;
  }
}
</script>
</body>
</html>
